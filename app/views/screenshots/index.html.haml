- cache(@screenshots.map(&:updated_at).join('-') ) do
  .grid-sizer.grid-item.not-scroll-revealable
  - @screenshots.each_with_index do |sc, i|
    - if i == 5
      .grid-item.stay{data: {country: 'neverland', city: 'the-pirate-boat'}}
        .explanation
          This collection of screenshots was gathered automatically from around the world. Each visit or click on #{'<span class="fa fa-camera fa-inline"></span>'.html_safe} on the main site triggers a new submission.
          %br
          %br
          Every pattern is generated dynamically(click me).
        %canvas#canvas{style: "width: 100%; min-height: 10rem;"}
    - cache([sc.id, sc.updated_at].join('-')) do
      .screenshot.grid-item.not-scroll-revealable{data:{id: sc.id, country: sc.country_name, city: sc.city, screenshot: sc.screenshot.url(:tile)}}
        = image_tag i < 10 ? sc.screenshot.url(:tile) : ''
        = link_to "https://maps.google.com/maps?q=#{sc.latitude},#{sc.longitude}&hl=es;z=14&output=embed", class: 'colorbox tile-link' do
          .info
            .artists
              %h4.artist-name
                - name = sc.name.blank? ? nil : "by #{sc.name}"
                %span.name= name
                %span.location= " #{sc.location}"
                - t_ = distance_of_time_in_words_to_now sc.created_at
              %h4.artist-name
                - if I18n.locale == :en
                  = t_ + ' ago'
                - else
                  = 'il y a ' + t_

- content_for :screenshot_ui do
  #sc-filters
    %div
      %input.filter#country{type: 'checkbox', data: {filter: 'country'}}
      %label{for: 'country'} distinct countries
    %div
      %input.filter#city{type: 'checkbox', data: {filter: 'city'}}
      %label{for: 'city'} distinct cities
    %div
      .yours Go to your screenshot
  %table#logs
    - (0..4).each do |i|
      - sc = @screenshots[i]
      %tr{data: {id: sc.id}}
        - if i == 0
          %td.screenshot-title{style: 'vertical-align: top;'}
            LATEST SUBMISSIONS:
        - else
          %td
        %td
          - name = sc.name.blank? ? nil : "by #{sc.name}, "
          = "#{distance_of_time_in_words_to_now(sc.updated_at)} ago <span class='name'>#{name}<span>, #{sc.country_name.titleize}".html_safe
